.case-study-cards {
    position: relative;
    height: 100vh;

    .container {
        max-width: 100%;
        height: 100vh;
        padding: 0;
    }

    .flickity {

        &-viewport,
        &-slider {
            width: 100%;
            height: 100vh;
        }

        &-page-dots {
            bottom: 2em;
        }

        &-btn {
            position: absolute;
            bottom: 2em;
            padding: 0.25em 0.5em;
            appearance: none;
            background: none;
            border: none;
            outline: none;
            font-family: inherit;
            font-size: s('large-1');
            color: c('base-0');
            background: rgba(34, 34, 34, 0.15);
            mix-blend-mode: multiply;
            border-radius: 0.25em;
            opacity: 0.35;
            transition: 150ms ease-in-out;
            cursor: pointer;

            &__next {
                right: 2em;
            }

            &__prev {
                left: 2em;
            }

            &:hover,
            &:focus {
                opacity: 0.8;
            }
        }
    }
}

.case-study-card {
    height: 100%;
    width: 100%;
    background: c('base-1');
    overflow: hidden;

    &__layers {
        height: 100%;
        perspective: 2000px;
        transform-style: preserve-3d;
    }

    &__layer {
        will-change: transform;

        &--1,
        &--2,
        &--3 {
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        &--1 {
            transform: translateZ(-100px);
            pointer-events: none;
            z-index: 1;
        }

        &--2 {
            position: relative;
            z-index: 10;
        }

        &--3 {
            transform: translateZ(100px);
            pointer-events: none;
            z-index: 20;
        }

        img {
            width: 100%;
            height: 100%;
            margin: 0 auto;
            object-fit: contain;
            filter: drop-shadow(0 3px 24px rgba(34, 34, 34, 0.18));
        }
    }

    &__details {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        user-select: none;
    }

    &__title {
        margin: 0;
        color: #000;
        font-size: s('large-6');
        font-weight: 300;
        //text-shadow: 0 3px 6px rgba(34, 34, 34, 0.06), 0 3px 12px rgba(34, 34, 34, 0.12), 0 3px 24px rgba(34, 34, 34, 0.18);
    }

        //move externally
    &__button {
        margin-top: 3em;
    }

    //Flickity animation specifics
    &__layer--1 {
        img {
            opacity: 0;
            transform: translate(14%, 0);
            transition: transform 400ms ease, opacity 0s;
        }
    }
    &__layer--2 {
        .case-study-card__details {
            opacity: 0;
            transform: translate(30%, 0);
            transition: transform 650ms ease, opacity 0s;
        }
    }
    &__layer--3 {
        img {
            opacity: 0;
            transform: translate(30%, 0);
            transition: transform 300ms ease, opacity 0s;
        }
    }


    &.is-selected {

        .case-study-card {

            &__layer--1,
            &__layer--3 {
                img {
                    opacity: 1;
                    transform: translate(0, 0);

                }
            }
            &__layer--2 {
                .case-study-card__details {
                    opacity: 1;
                    transform: translate(0, 0);

                }
            }
        }

    }

    &__lizzy-healy {
        background: linear-gradient(45deg, darken(#f6f9fc, 3%) 0%, lighten(#f6f9fc, 3%) 100%);

        .case-study-card {

            &__button {
                background: #000;
                color: #fff;
            }
        }

    }

    &__eternity {
        background: linear-gradient(45deg, darken(#ef4538, 3%) 0, lighten(#ef4538, 3%) 100%);

        .case-study-card {

            &__button {
                background: #000;
                color: #fff;
            }
        }

    }

    &__upstream {
        background: linear-gradient(45deg, rgb(11, 93, 105) 0%, rgb(19, 171, 181) 100%);
    }
}
